{% load crispy_forms_tags %}
{% block content %}
{% load static %}
<div class="header-back-button">
    <a href="{% url 'sprint_list' %}">&#8592; Back</a>
</div>
<div class="header-bar">
    <div>        
        <link rel="stylesheet" href="{% static 'css/home.css' %}">
        <link rel="stylesheet" href="{% static 'css/task.css' %}">
        <link rel="stylesheet" href="{% static 'css/sprint_list.css' %}">
        <h1>Hello {{request.user|title}}</h1>
        
        <!--<div class="dropdown">
            <button class="dropbtn">Dropdown</button>
            <div class="dropdown-content">
              <span>project.name</span>
            </div>-->
            <select>
                <option selected>---------</option>
                {% for project in object_list %}
                    <option>{{project.name}}</option>
                {% endfor %}
              </select>
            <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

        </div> 
    </div>
</div>
<br />
<div id="body-pd">
    <header class="header" id="header">
        <div class="header_toggle">
            <img class="bx bx-menu" id="header-toggle" width="40px" src="/static/images/burger-menu.jpg" alt="burger menu">
        <div class="header-logout">  
            <img class="exit-icon" src="/static/images/exit.png" alt="burger menu">
            {% if request.user.is_authenticated %}
                <a class="header-text" href="{% url 'user_logout' %}">Logout</a> 
            {% else %}
                <a class="header-text" href="{% url 'user_login' %}">Login</a> 
            {% endif %} 
            <div> </div>
        </div>
    </div>
    </header>
    
    <div class="l-navbar" id="nav-bar">
        <nav class="nav">
            <div>
                <a href="#" class="nav_logo">
                    <img class="bx bx-menu" id="header-toggle" width="30px" src="/static/images/app-icon.png" alt="burger menu">
                    <span class="nav_logo-name">Scrum Manager</span>
                </a>
                <div class="nav_list"> 
                    <a href="{% url 'tasks' %}" class="nav_link active">
                        <img width="35px" src="/static/images/task-icon.png" alt="burger menu">
                        <span class="nav_name">Task</span>
                    </a>
                    <a href="{% url 'sprint_list' %}" class="nav_link">
                        <img width="30px" src="/static/images/backlog-icon.png" alt="burger menu">
                        <span class="nav_name">Backlog</span>
                    </a>
                    <a href="{% url 'project_list' %}" class="nav_link">
                        <img width="30px" src="/static/images/board-icon.png" alt="burger menu">
                        <span class="nav_name">Board</span>
                    </a>  
                </div>
            </div>
        </nav>
    </div>
    <script src="{% static 'js/main.js' %}"></script>  
</div>
<body>
    <a class="btn" style="font-size: 1rem;" href="{% url 'sprint_form' %}"> Create Sprint </a>
  
 

    {% for sprint in object_list %}
        <div class="background-sprint">
        <p><span class="sprint-title">{{sprint.name}} </span><span>{{sprint.start}} - {{sprint.end}}</span>
            <span class="title">title: {{sprint.project.name}}</span>
            <span class="align-buttons">
                <span><a href="{% url 'sprint' sprint.pk %}"class="btn btn-style btn-detail">Detail</a> </span> 
                <span><a href="{% url 'sprint_update' sprint.pk %}" class="btn btn-style btn-edit">Edit</a> </span> 
                <span><a href="{% url 'sprint_delete' sprint.pk %}" class="btn btn-style btn-delete">Delete</a> </span> 
            </span>
        </p>
        <table>
            {% for task in tasks %}
                {% if sprint == task.sprint %}
                    <div class="task-container">
                        <a href="{% url 'task' task.pk %}">
                            <span>{{task.title}}</span>
                            <!-- <span>{{task.projectname}}</span> -->
                            <span>{{task.sprint}}</span>
                            <span>{{task.status}}</span>
                            <span>{{task.subtask}}</span>
                        </a>
                    </div>   
                {% endif %}
            {% endfor %}
        </table>
    </div>
    <br />
    {% endfor %}
    <!--
    {% for sprint in object_list %}
    <div class="table-container">
        <table>
                <tr>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Start</th>
                    <th>Duration</th>
                    <th>End</th>
                    <th></th>
                </tr>
                <tr>
                    <td>{{sprint.name}}</td>
                    <td>{{sprint.description}}</td>
                    <td>{{sprint.start}}</td>
                    <td>{{sprint.Duration}}</td>
                    <td>{{sprint.end}}</td>
                    <td>
                        <div style="margin: 22px 0px;">
                            <span><a href="{% url 'sprint' sprint.pk %}"class="btn btn-style btn-detail">Detail</a> </span> 
                            <span><a href="{% url 'sprint_update' sprint.pk %}" class="btn btn-style btn-edit">Edit</a> </span> 
                            <span><a href="{% url 'sprint_delete' sprint.pk %}" class="btn btn-style btn-delete">Delete</a> </span> 
                        </div>
                    </td>  
                    <div class="table-container">
                        <table>
                            <tr>
                                <th>Title</th>
                                <th>Project Name</th>
                                <th>Sprint</th>
                                <th>Status</th>
                                <th>Sub-Task</th>   
                                <th></th>
                            </tr>
                            {% for task in tasks %}
                                {% if sprint == task.sprint %}
                                <tr>
                                    <td><a href="{% url 'task' task.pk %}">{{task.title}}</a></td>
                                    <td>{{task.projectname}}</td>
                                    <td>{{task.sprint}}</td>
                                    <td>{{task.status}}</td>
                                    <td>{{task.subtask}}</td>
                                    <td></td>
                                </tr>   
                                {% endif %}
                            {% endfor %}
                        </table>
                    </div>
                </tr>
        </table>  
        <br />
    {% endfor %} 
    </div> -->   
</body>    
{% endblock content %}
